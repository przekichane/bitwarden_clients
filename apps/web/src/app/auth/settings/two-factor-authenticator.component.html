<form *ngIf="authed" [formGroup]="formGroup" [bitSubmit]="submit">
  <bit-dialog dialogSize="default">
    <span bitDialogTitle
      >{{ "twoStepLogin" | i18n }}
      <span bitTypography="body1">{{ "authenticatorAppTitle" | i18n }}</span>
    </span>
    <ng-container bitDialogContent>
      <ng-container *ngIf="enabled">
        <app-callout type="success" title="{{ 'enabled' | i18n }}" icon="bwi bwi-check-circle">
          <p bitTypography="body1">{{ "twoStepLoginProviderEnabled" | i18n }}</p>
          {{ "twoStepAuthenticatorReaddDesc" | i18n }}
        </app-callout>
      </ng-container>
      <ng-container *ngIf="!enabled">
        <p>
          {{ "twoStepAuthenticatorInstructionPrefix" | i18n }}
          <a bitLink href="https://getaegis.app" target="_blank" rel="noreferrer">AEGIS</a>
          {{ "twoStepAuthenticatorInstructionInfix1" | i18n }}
          <a bitLink href="https://2fas.com" target="_blank" rel="noreferrer">2FAS</a>
          {{ "twoStepAuthenticatorInstructionInfix2" | i18n }}
          <a
            bitLink
            href="https://bitwarden.com/products/authenticator/"
            target="_blank"
            rel="noreferrer"
            >Bitwarden Authenticator</a
          >
          {{ "twoStepAuthenticatorInstructionSuffix" | i18n }}
        </p>

        <p class="text-center">
          <img
            src="../../../images/download_apple_appstore.svg"
            href="https://apps.apple.com/ca/app/bitwarden-authenticator/id6497335175"
            alt="Download on App Store"
            max-width="120"
            height="40"
          />
          <!--Margin to ensure compliance with google play badge usage guidelines (https://partnermarketinghub.withgoogle.com/brands/google-play/visual-identity/badge-guidelines/#:~:text=The%20clear%20space%20surrounding%20the%20badge%20must%20be%20equal%20to%20one%2Dquarter%20of%20the%20height%20of%20the%20badge.)-->
          <img
            src="../../../images/download_google_playstore.svg"
            href="https://play.google.com/store/apps/details?id=com.bitwarden.authenticator"
            alt="Get it on Google Play"
            max-width="120"
            height="40"
            style="margin-left: 10px"
          />
        </p>
        {{ "twoStepAuthenticatorScanCode" | i18n }}
      </ng-container>
      <hr *ngIf="enabled" />
      <p class="text-center" [ngClass]="{ 'mb-0': enabled }">
        <canvas id="qr"></canvas><br />
        <code appA11yTitle="{{ 'key' | i18n }}">{{ key }}</code>
      </p>
      <ng-container *ngIf="!enabled">
        <bit-form-field>
          <bit-label>{{ "twoStepAuthenticatorEnterCode" | i18n }}</bit-label>
          <input bitInput type="text" formControlName="token" appInputVerbatim />
        </bit-form-field>
      </ng-container>
    </ng-container>
    <ng-container bitDialogFooter>
      <button bitButton bitFormButton type="submit" buttonType="primary">
        {{ (enabled ? "disable" : "enable") | i18n }}
      </button>
      <button bitButton bitFormButton type="button" buttonType="secondary" [bitAction]="close">
        {{ "close" | i18n }}
      </button>
    </ng-container>
  </bit-dialog>
</form>
